(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index","common/main"],{"00c3":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("7bc6"),n("921b");var o=l(n("66fd")),r=l(n("b8c8")),i=l(n("df41")),u=l(n("e263")),c=l(n("1aa1")),s=f(n("9480"));function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function f(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=o?Object.getOwnPropertyDescriptor(t,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=t[r]}return n.default=t,e&&e.set(t,n),n}function l(t){return t&&t.__esModule?t:{default:t}}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}o.default.prototype.$request=i.default,o.default.prototype.$validate=c.default,o.default.config.productionTip=!1,r.default.mpType="app",Object.keys(s).forEach((function(t){o.default.filter(t,s[t])}));var p=new o.default(m({store:u.default},r.default));t(p).$mount();var g=p;e.default=g}).call(this,n("543d")["createApp"])},"1fd4":function(t,e,n){"use strict";var o=n("c556"),r=n.n(o);r.a},"2ecb":function(t,e,n){},"43b1":function(t,e,n){"use strict";n.r(e);var o=n("9e28"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},6157:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=u(n("a34a")),r=n("f926"),i=n("2f62");function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,o,r,i,u){try{var c=t[i](u),s=c.value}catch(a){return void n(a)}c.done?e(s):Promise.resolve(s).then(o,r)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function u(t){c(i,o,r,u,s,"next",t)}function s(t){c(i,o,r,u,s,"throw",t)}u(void 0)}))}}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d,m=function(){n.e("components/rent_login/rent_login").then(function(){return resolve(n("2235"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/roomSku/roomSku").then(function(){return resolve(n("0d23"))}.bind(null,n)).catch(n.oe)},p=n("0b82"),g={components:{loginModal:m,roomSku:h},data:function(){return{tempCommunity:{},isShowLoginModal:!1,communityInfo:{},isAuthorized:!1,orientationList:["东","南","西","北"],roomList:[],curMarkerIndex:null,communityList:[],showBox:!1,map:{latitude:39.909,longitude:116.39742,scale:13,markers:[]},district:[]}},computed:f({},(0,i.mapState)(["user","global"])),onShow:function(){var t=this;if(this.showBox=!1,0!=this.global.jumpCommunityName.length){var e=this.map.markers.filter((function(e,n){return e.callout.content.split(" ")[0]==t.global.jumpCommunityName}));console.log(e),this.calloutTap({markerId:e[0].id})}},onLoad:function(){d=new p({key:"CU4BZ-IJPWP-R4ADW-L6WOR-KVTXV-TNFKL"}),this.checkSession(),this.findCommAll(),this.getLocation()},methods:{getUserInfo:function(t){var e=this;console.log(t);var n=this;if("getUserInfo:fail auth deny"!=t.detail.errMsg){var o={vm:n,userInfo:t.detail.userInfo};(0,r.login)().then((function(){n.$store.dispatch("findUserById",o),e.retunSucc()}))}},retunEmit:function(){console.log("nihao"),this.isShowLoginModal=!1},escapeCheck:function(){var t=this;return new Promise((function(e,n){t.$request.escapeCheck().then((function(t){e(t.data.data.value)}))}))},retunSucc:function(){var t=this;console.log(this.tempCommunity),this.getRoomList(this.tempCommunity.communityAddress).then((function(){t.escapeCheck().then((function(e){1==t.user.userInfo.authStatus||1==e?t.isAuthorized=!0:t.isAuthorized=!1}))}))},getCommunityInfo:function(t){var e=this;this.$request.getCommunityInfo({communityAddress:t,intermeId:this.user.userInfo.id}).then((function(t){e.communityInfo=t.data.data}))},follow:function(e){var n=this;if(this.user.userInfo.id){var o={intermeId:this.user.userInfo.id,attentionStatus:1==this.communityInfo.attentionStatus?0:1,communityAddress:this.communityInfo.communityAddress};this.$request.follow(o).then((function(e){200==e.data.code&&(n.communityInfo.attentionStatus=o.attentionStatus,t.showToast({title:o.attentionStatus?"关注成功":"取关成功",icon:"none"}))}))}else this.isShowLoginModal=!0,this.showBox=!1},setMakers:function(t,e,n,o,r){var i={id:1,latitude:39.909,longitude:116.39742,callout:{content:"金东名苑@8套",color:"#333333",bgColor:"#FFFFFF",borderRadius:14,fontSize:15,padding:6,textAlign:"center",display:"ALWAYS"},iconPath:"../../static/logo.png",width:20,height:20};i.id=o+1,i.callout.content=n,i.latitude=t,i.longitude=e,this.map.markers.push(i),this.district.push(r)},getGeocode:function(t,e,n){var o=this;return new Promise((function(r){d.geocoder({address:t,success:function(t){o.setMakers(t.result.location.lat,t.result.location.lng,e,n,t.result.address_components.district)},complete:function(t){console.log("I see",t)}})}))},findCommAll:function(){var t=this;t.$request.findCommunityAll().then((function(e){t.communityList=e.data.data,t.communityList.forEach(function(){var e=s(o.default.mark((function e(n,r){var i;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n.communityName+" "+n.letRoom+"套",e.next=3,t.getGeocode(n.communityAddress,i,r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}))},getSetting:function(){t.getSetting({success:function(t){}})},checkSession:function(){var e=this;t.checkSession({success:function(n){"checkSession:ok"==n.errMsg&&t.getUserInfo({lang:"zh_CN",success:function(t){console.log(t);var n={vm:e,userInfo:t.userInfo};(0,r.login)().then((function(){e.$store.dispatch("findUserById",n)}))}})}})},returnEmit:function(e){t.navigateTo({url:"../roomDetail/roomDetail?roomId="+e.id+"&houseId="+e.houseId})},showList:function(){this.showBox=!0},hideList:function(){this.showBox=!1,this.map.markers[this.curMarkerIndex].callout.bgColor="#FFFFFF",this.map.markers[this.curMarkerIndex].callout.color="#333333"},getRoomList:function(t){var e=this;return new Promise((function(n,o){e.$request.findRoomList({communityAddress:t}).then((function(t){t.data.data.forEach((function(t,e){""==t.roomImgs?t.roomImgs=["../../static/defaultHouse.jpg"]:t.roomImgs=t.roomImgs.split(",")})),e.roomList=t.data.data,n(!0)}))}))},jump:function(){this.user.userInfo.id?t.navigateTo({url:"../userInfo/userInfo"}):(this.isShowLoginModal=!0,this.showBox=!1)},calloutTap:function(t){var e=this;1==this.user.userInfo.authStatus&&(this.isAuthorized=!0);var n=this.map.markers.findIndex((function(e){return e.id==t.markerId}));this.curMarkerIndex=n,this.map.markers.forEach((function(t,o){o==n?(e.map.markers[o].callout.color="#FFFFFF",e.map.markers[o].callout.bgColor="#3c76ed"):(e.map.markers[o].callout.color="#333333",e.map.markers[o].callout.bgColor="#FFFFFF")}));var o=this.communityList.filter((function(e,n){return n==t.markerId-1}));this.tempCommunity=o[0],this.getCommunityInfo(o[0].communityAddress),this.getRoomList(o[0].communityAddress).then((function(){e.showList()})),this.map.latitude=this.map.markers[n].latitude,this.map.longitude=this.map.markers[n].longitude},getLocation:function(){var e=this;t.getLocation({type:"gcj02",success:function(t){d.reverseGeocoder({location:{latitude:t.latitude,longitude:t.longitude},success:function(t){var n=t.result;e.map.latitude=n.location.lat,e.map.longitude=n.location.lng}})}})}}};e.default=g}).call(this,n("543d")["default"])},"65ab":function(t,e,n){"use strict";n.r(e);var o=n("e1e1"),r=n("d7ff");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("1fd4");var u,c=n("f0c5"),s=Object(c["a"])(r["default"],o["b"],o["c"],!1,null,"4c6862d4",null,!1,o["a"],u);e["default"]=s.exports},"9e28":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={onLaunch:function(){console.log("App Launch")},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")}};e.default=o},b8c8:function(t,e,n){"use strict";n.r(e);var o=n("43b1");for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("dfe7");var i,u,c,s,a=n("f0c5"),f=Object(a["a"])(o["default"],i,u,!1,null,null,null,!1,c,s);e["default"]=f.exports},c556:function(t,e,n){},d7c3:function(t,e,n){"use strict";(function(t){n("7bc6"),n("921b");o(n("66fd"));var e=o(n("65ab"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},d7ff:function(t,e,n){"use strict";n.r(e);var o=n("6157"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},dfe7:function(t,e,n){"use strict";var o=n("2ecb"),r=n.n(o);r.a},e1e1:function(t,e,n){"use strict";var o,r=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=!0,t.e1=!0)},i=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))}},[["d7c3","common/runtime","common/vendor"]]]);